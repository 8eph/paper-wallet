function generate(){var e=document.getElementById("number-option").value,t=document.getElementById("color-option").value,n=document.getElementById("password").value;if(""==n){if(!confirm("Are you sure you want proceed with unencrypted wallets?"))return void(document.getElementById("password").value="")}if(""!==n){if(!confirm("Are you sure you want to BIP38 encrypt the wallets?\r\n \r\n Make sure you save your password!"))return void(document.getElementById("password").value="");document.getElementById("overlay").style.display="block",document.getElementById("overlay-text").innerHTML="Encrypting Keys ..."}for(var d=0;d<4;d++)resetOne(d);setTimeout(function(){for(var n=0;n<4;n++)generateOne(n,t,e);document.getElementById("print").style.display="inline-block",document.getElementById("reset").style.display="inline-block"},100)}function generateOne(e,t,n){if(e>=n)resetOne(e);else{var d={private:212,public:85},r=secureRandom.randomBuffer(32),o=new CoinKey(r,d),y=document.getElementById("password").value,c=o.privateWif;if(""!==y){var l=wif.decode(o.privateWif);bip38.version=d;var i=bip38.encrypt(l.privateKey,l.compressed,y,function(e){console.log("encrypting",Math.round(e.percent),"%")});document.getElementById("encrypted-key-"+e).innerHTML=i,document.getElementById("pt-encrypted-"+e).style.display="table-row",document.getElementById("password-"+e).innerHTML=y,document.getElementById("pt-password-"+e).style.display="table-row",document.getElementById("decrypt-tab-"+e).style.display="block",c=i}document.getElementById("plain-text-"+e).style.display="block",document.getElementById("public-key-"+e).innerHTML=o.publicAddress,document.getElementById("private-key-"+e).innerHTML=o.privateWif,document.getElementById("pubkey-string-"+e).innerHTML=o.publicAddress,document.getElementById("pubkey-string-"+e+"-invert").innerHTML=o.publicAddress,document.getElementById("privkey-string-"+e).innerHTML=c,document.getElementById("privkey-string-"+e+"-invert").innerHTML=c;var m=qrcode(4,"L");m.addData(o.publicAddress),m.make(),document.getElementById("pubkey-qr-"+e).innerHTML=m.createImgTag(4,8);var u=qrcode(4,"L");u.addData(c),u.make(),document.getElementById("privkey-qr-"+e).innerHTML=u.createImgTag(4,8),document.getElementById("wallet-"+e).style.display="block","BLACK_WHITE"===t?(document.getElementById("paper-wallet-"+e).style.color="#000",document.getElementById("paper-background-"+e).setAttribute("src","images/paper-wallet-bw.png")):(document.getElementById("paper-wallet-"+e).style.color="#FFF",document.getElementById("paper-background-"+e).setAttribute("src","images/paper-wallet-color.png")),document.getElementById("overlay").style.display="none"}}function reset(){if(confirm("Are you sure you want to reset the wallets? This can not be undone.")){document.getElementById("print").style.display="none",document.getElementById("reset").style.display="none";for(var e=0;e<4;e++)resetOne(e)}}function resetOne(e){document.getElementById("pubkey-string-"+e).innerHTML="",document.getElementById("pubkey-string-"+e+"-invert").innerHTML="",document.getElementById("privkey-string-"+e).innerHTML="",document.getElementById("privkey-string-"+e+"-invert").innerHTML="",document.getElementById("pubkey-qr-"+e).innerHTML="",document.getElementById("privkey-qr-"+e).innerHTML="",document.getElementById("wallet-"+e).style.display="none",document.getElementById("decrypt-tab-"+e).style.display="none"}function print(){window.print()}function decrypt(){var e={private:212,public:85},t=document.getElementById("decrypt_password").value,n=document.getElementById("encrypted").value;document.getElementById("overlay").style.display="block",document.getElementById("overlay-text").innerHTML="Decrypting Keys ...",setTimeout(function(){try{var d=bip38.decrypt(n,t,function(e){console.log("decrypting",Math.round(e.percent),"%")}),r=wif.encode(150,d.privateKey,d.compressed),o=CoinKey.fromWif(r,e);document.getElementById("public-key-d").innerHTML=o.publicAddress,document.getElementById("encrypted-key-d").innerHTML=n,document.getElementById("private-key-d").innerHTML=r,document.getElementById("password-d").innerHTML=t,document.getElementById("reset_decrypt").style.display="inline-block",document.getElementById("plain-text-d").style.display="block",document.getElementById("overlay").style.display="none"}catch(e){document.getElementById("overlay").style.display="none",console.log("error",e)}},100)}function showDecrypt(){document.getElementById("decrypt-tab").style.display="block",document.getElementById("generate-tab").style.display="none"}function showGenerate(){document.getElementById("decrypt-tab").style.display="none",document.getElementById("generate-tab").style.display="block"}function decryptReset(){document.getElementById("public-key-d").innerHTML="",document.getElementById("encrypted-key-d").innerHTML="",document.getElementById("private-key-d").innerHTML="",document.getElementById("password-d").innerHTML="",document.getElementById("plain-text-decrypt").style.display="none",document.getElementById("reset_decrypt").style.display="none"}var CoinKey=require("coinkey"),secureRandom=require("secure-random"),qrcode=require("qrcode-generator"),bip38=require("bip38"),cs=require("coinstring"),util=require("../node_modules/coinkey/lib/util"),base58=require("bs58"),wif=require("wif");window.onload=function(){document.getElementById("generate")&&(document.getElementById("generate").onclick=generate),document.getElementById("print")&&(document.getElementById("print").onclick=print),document.getElementById("reset")&&(document.getElementById("reset").onclick=reset),document.getElementById("decrypt")&&(document.getElementById("decrypt").onclick=decrypt),document.getElementById("reset_decrypt")&&(document.getElementById("reset_decrypt").onclick=decryptReset),document.getElementById("decrypt-tab-btn")&&(document.getElementById("decrypt-tab-btn").onclick=showDecrypt),document.getElementById("generate-tab-btn")&&(document.getElementById("generate-tab-btn").onclick=showGenerate),document.getElementById("decrypt-tab-0")&&(document.getElementById("decrypt-tab-0").onclick=showDecrypt),document.getElementById("decrypt-tab-1")&&(document.getElementById("decrypt-tab-1").onclick=showDecrypt),document.getElementById("decrypt-tab-2")&&(document.getElementById("decrypt-tab-2").onclick=showDecrypt),document.getElementById("decrypt-tab-3")&&(document.getElementById("decrypt-tab-3").onclick=showDecrypt)};